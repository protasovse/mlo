{% extends 'front/base.html' %}

{% block title %}
    {% if rubric %}
        {% if rubric.title or rubric.h1 %}
            {{ rubric.title|default:rubric.h1 }}
        {% else %}
            Консультации юристов по теме «{{ rubric.name }}»
        {% endif %}
        на сайте Мойюрист.онлайн
    {% else %}
        Консультации юристов и адвокатов на сайте Мойюрист.онлайн!
    {% endif %}
{% endblock %}

{% block content %}


    {# Хедер страницы вопроса #}
    {% if not user.is_authenticated %}
        {% include 'front/generic/header_question.html' with bg_class='bg-2' title=rubric.call_to_action %}
    {% endif %}

    {% if not user.is_authenticated or user.role == 1 %}
        {# Хлебные крошки #}
        <div class="question-page_container">
            <div class="row">
                <nav aria-label="breadcrumb" class="col-12">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Главная</a></li>
                        <li class="breadcrumb-item"><a href="{% url 'questions:list' %}">Консультации юриста</a></li>
                        {% if rubric %}
                            <li class="breadcrumb-item active">{{ rubric }}</li>
                        {% endif %}
                    </ol>
                </nav>
            </div>
        </div>
    {% endif %}

    {# Содержание страницы вопроса #}
    <div class="question-page_container">

        {% if not user.is_authenticated or user.role == 1 %}
            {# Основная часть — заголовок темы, тексты #}
            <div class="row">

                <div class="question-page_main-part">

                    <article class="entry question">

                        {# Заголовок #}
                        <div class="row">
                            <h2 class="col mb-4">
                                {% if rubric %}
                                    {{ rubric.h1|default:rubric.title|default:rubric }}
                                {% else %}
                                    Консультация юриста и адвоката онлайн
                                {% endif %}
                            </h2>
                        </div>

                        <div class="row">

                            <div class="col">
                                <div class="lead">
                                    {% if rubric %}
                                        {{ rubric.html_description|safe }}
                                    {% else %}
                                        <p>«Мойюрист.онлайн» — это проект платной либо бесплатной юридической
                                            консультации
                                            онлайн.
                                            «Мойюрист.онлайн» объединяет профессиональных юристов и тех, кому нужен
                                            грамотный юридический совет.</p>
                                        <p>Проект «Мойюрист.онлайн» позволяет каждому человеку получить грамотный совет
                                            юриста в любой жизненной ситуации. На вопросы наших посетителей отвечают
                                            профессиональные юристы. Специалисты, которые не только дают бесплатные
                                            консультации, но и занимаются обширной юридической практикой.</p>
                                    {% endif %}

                                    {% if rubric %}
                                        {{ rubric.html_content|safe }}
                                    {% else %}
                                    {% endif %}
                                </div>

                                <p class="lead"><strong>Юристы и адвокаты сайта «Мойюрист.онлайн» проконсультируют Вас
                                    {{ rubric.advice_on }} платно или бесплатно. Для этого просто задайте
                                    вопрос.</strong>
                                </p>
                                <p class="text-center mt-5"><a href="{% url 'ask_question' %}"
                                                               class="btn btn-primary btn-sm">Начать
                                    консультацию</a></p>

                            </div>

                        </div>

                    </article>

                </div>

                {# Боковая колонка 1  #}
                <aside class="question-page_aside-part">

                    {% if lawyers_from_rating.count %}
                        <h4 class="mb-4">Наши эксперты</h4>
                        {% include 'rating/aside/best_lawyers.html' with items=lawyers_from_rating %}
                    {% endif %}

                </aside>

            </div>
        {% endif %}

        <div class="row question-page_gradient">

            {# Основная часть — вопросы #}
            <div class="question-page_main-part">

                <div class="row">
                    <h3 class="answer-list-head">Консультации юристов по
                        {% if rubric.name %}теме «{{ rubric.name }}»
                        {% else %}российскому законодательству{% endif %}</h3>
                </div>

                <hr>

                {% for question in questions.all %}
                    {% include 'question/generic/question_item_in_list.html' with item=question show_answers=False %}
                {% endfor %}

                {% if rubrics.last.get_children %}
                    <div class="row mt-3">
                        <h4 class="col-12 mb-4">Также консультации по темам:</h4>
                        {% for rubric in rubrics.last.get_children %}
                            <div class="col-12 col-sm-6 mb-3">
                                <a href="{{ rubric.get_absolute_url }}"
                                >{{ rubric.link|default:rubric.name }}</a>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}

                <footer class="row">
                    <div class="col-12 text-center">
                        <a href="{% url 'questions:list' %}" class="btn btn-outline-primary btn-sm">Ещё вопросы…
                            <i class="icon-nav-arrow-down ml-2"></i></a>
                    </div>
                </footer>

            </div>

            <aside class="question-page_aside-part">

                <h4>Темы консультаций</h4>

                <ul class="list-unstyled mt-4">
                    {% for r in rubrics_list %}
                        <li class="mb-2">
                            <a class="{% if r == rubric %}text-dark{% else %}text-muted{% endif %}"
                               href="{{ r.get_absolute_url }}">{{ r.link|default:r }}</a>
                        </li>
                    {% endfor %}
                </ul>

            </aside>

        </div>

    </div>

    {# Рубрикатор #}
    {% comment %}
        <section class="gray d-none d-sm-block">
            <div class="container">
                <div class="row">
                    <h2 class="col-12 mb-5">Темы юридических консультаций</h2>
                    {% for rubric in all_rubrics %}
                        <div class="col-12 col-sm-6 col-lg-4 col-xl-3 mb-3">
                            <h5 class="mb-0" style="font-weight: 300;"><a style="color:#545454;"
                                href="{{ rubric.get_absolute_url }}">{{ rubric.link|default:rubric.name }}</a></h5>
                            {% for subrubric in rubric.get_children %}
                                <a class="small" href="{{ subrubric.get_absolute_url }}">{{ subrubric.link|default:subrubric.name }}</a>
                                •
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
        {% endcomment %}

{% endblock %}